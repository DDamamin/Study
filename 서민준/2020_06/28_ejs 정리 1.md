# ejs

## ejs란?

ejs는 **E**mbedded **J**ava**S**cript의 약자로, 자바스크립트가 내장되어 있는 html 파일을 말한다.

ejs는 다음과 같은 특징을 지닌다.

- html의 태그처럼 자바스크립트의 내용을 삽입할 수 있다.
    -> 페이지를 동적으로 작성하는 것이 수월해짐
- 서버에서 보낸 변수를 가져와 사용할 수 있다.

## 코드를 내장하기 : <% %>

자바스크립트를 내장 시킬 수 있는 태그가 2가지가 있는데 가장 기본은 `<% %>`이다.

이 사이에 원하는 자바스크립트 내용을 넣으면 된다.

```ejs
<html>
    <head>
        <title>EJS TEST</title>
        <body>
            <% for(var i = 0; i < 5; i++) { %>
            	<h1>안방으로 들어왔습니다.</h1>
            <% } %>
        </body>
    </head>
</html>
```

주의할 점은 다음과 같다.

- **<% %> 안에는 무조건 자바스크립트 코드가 들어가야 한다.**
- **줄바꿈을 하면 새로운 <% %>를 이용해야 한다.**

## 변수값을 내장하기 : <%= %> or <%- %>

 <%= %> 태그 또는 <%- %> 태그가 있다. 표기는 서로 다르지만 역할은 동일하다.

**해당 태그 안의 변수 값을 그대로 코드처럼 옮겨주는 역할**을 한다.

**이 태그를 썼을 때는 변수의 자료형 같은 건 생각하지말고 그냥 코드로 들어가 있다 생각해야 한다.**

```ejs
<html>
    <head>
        <title>EJS TEST</title>
    </head>
    <body>
        <% for (var i = 0; i < 5; i++) { %>
            <h1>안방으로 <%= i + 1 %>번째 들어왔습니다.</h1>
        <% } %>
    </body>
</html>
```

변수의 값이 코드처럼 들어가기 때문에 **변수의 자료형이 문자열이라고 실수를 해서는 안 된다.**

**<% %>, <%= %> 태그는 ejs 안에 작성된 자바스크립트 코드에도 내장시킬 수 있다.**

## <% %> 태그와 <%= %> 태그 사용 시 유의점

- **<% %>는 한 줄로 써야 한다.**
    <% %> 안에 코드를 쓰다 개행을 하면 다시 <% %>를 써서 코드를 진행해야 한다.
- **<% %>로 변수 선언을 하면 스코프 적용이 된다. ejs 내 자바스크립트와 <% %> 안의 변수명은 겹쳐도 따로 인식된다.**
    전역변수와 지역변수의 개념이 html 코드 안에서 똑같이 적용된다. html 내 코드와 <% %> 내 코드는 분리되어 있다.
- **<%= 문자열 변수 %>는 코드 해독 때 문자열로 인식되지 않는다.**
    <%= %> 태그는 해당 변수의 값을 그대로 코드로 박아넣는 것이기 때문에 자료형을 가리지 않는다. 선언되지 않은 변수라면 undefined라는 코드를 그대로 갖다 넣는다. 문자열로 저장하려면 "<%= %>" 식으로 써야 한다.
- **<% %> 내 코드는 개발자 모드로 볼 수 없다.**
    내장된 <% %> 자바스크립트 코드는 개발자 모드로 보고 싶어도 볼 수 없다. <%= %> 태그는 코드로 심어버리는 거라 보인다.
- **괄호 여닫기를 똑바로 하자.**
    ejs를 쓸 때 <% %> 태그 때문에 헷갈릴 수 있다. 개행을 하면 <% %>를 새로 써야되기 때문에 중괄호를 열었다면 끝에 항상 <% } %>가 있는지 확인하자. ejs 코드가 길어지면 좀 어지럽다.