# vlan

### 정의

여기에서 lan을 브로드캐스트 가능한 범위(브로드캐스트 도메인)으로 정의하겠다.

이러한 lan은 스위치와 같은 물리적인 2계층 네트워크 장비를 통해 분리될 수 있다.
단 이러한 물리적인 장치 연결에 구속적인 방법으로 lan을 나누기 보단 논리적으로 lan을 나눌 수 있는데 이 방법 혹은 이러한 브로드캐스트 도메인을 vlan이라고 한다.

### 역사

이더넷은 브로드캐스트를 기반으로 하는 네트워크였다.
과거 이더넷의 대역폭은 다른 대안이나 전화에 비해 훨씬 컸지만 브로드캐스트의 특성상 개별 연결 했을 때의 대역폭이 적어도 전체 사용중인 네트워크의 대역폭 만큼은 되어야 한다.
이에 대해 사람들은 이더넷 네트워크의 확장 문제에 대해 고민하기 시작했다.

이 과정에서 몇가지 방법들이 생겨나기 시작했고 그 중 몇가지는 스스로 학습하는 이더넷 스위치(mac 주소 학습), 신장 트리를 구성하는 방법, 그리고 vlan 등이 발명되었다.

### 사용하는 이유

물리적인 장치를 기준으로 네트워크에 할당했으므로 물리적인 장소의 제약이 있었다.
같은 스위치에 여러 장비들이 연결되어 있다면 브로드캐스트 대역이 혼란스러울 것이다.

vlan을 활용하면 물리적인 장소의 제약을 없앨 수 있고 하나의 lan을 여러 vlan으로 나눠 브로드캐스트 대역을 아낄 수 있다.

### 사용

#### 프로토콜

그냥 lan을 사용하는 이더넷인지 vlan을 사용하는지 사용하단면 어느 vlan인지 구별하기 위해
이더넷 프레임에 식별용 VLAN ID를 삽입한다.

vlan에 대한 정보는 end point로 전달되지 않는다. 이러한 정보는 스위치에서만 가지고 알아서 처리할 수 있기 때문이다.

#### 스위치에서 vlan을 지원하도록 만들기

우선 vlan은 주로 스위치에서 지원하는 기능이다.

스위치의 포트에는 두가지 종류가 있다.

- access 포트
  해당 포트로 이동하는 모든 패킷이 오직 하나의 랜 일때 사용한다.
  즉 스위치에서 end point로 가는 포트는 access 포트로 설정하면 된다.
  (end point와 스위치 사이에는 하나의 랜만 존재하기 때문이다.)
- truck 포트
  해당 포트로 이동하는 모든 패킷이 여러 랜 일때 사용한다.
  즉 vlan을 사용하는 스위치 둘을 연결할 때 사용한다.
  (서로의 vlan 정보를 전달해야하기 때문이다.)

