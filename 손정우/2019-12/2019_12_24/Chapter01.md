# 애플리케이션 프로그래밍 인터페이스

애플리케이션 프로그래밍 인터페이스(API)
최종 사용자의 애플리케이션에서 기능을 모듈화하는 재사용 가능한 블록으로 한 가지 문제에 대한 추상화를 제공하고 클라이언트가 어떤 문제를 해결하기 위한 컴포넌트와 어떻게 상호작용을 해야하는 지를 명시한다.

API는 코드를 작성한 자신, 동료, 대규모 개발 커뮤니티를 위해서 개발되며 하나의 함수의 형태에서 부터 수백 개의 클래스, 함수, 데이터 타입, 열거형, 상수 까지 여러 형태를 띌 수 있다. API는 누군가 소유권을 가질 수도 오픈 소스로 배포될 수도 있다.

요즘의 애플리케이션은 수많은 API를 바탕으로 개발되며 API는 다시 다른 API에 의존하기도 한다.

## C++로 구현하는 API

API의 구현은 보통 최종 사용자의 애플리케이션에 링크 가능한 라이브러리 형태로 나타나며 윈도우의 .lib, 리눅스나 맥 OS X의 .a와 같은 정적 라이브러리나 윈도우의 .dll, 리눅스의 .so와 같은 동적 라이브러리로 만들어 진다.

C++ API는 다음과 같은 요소를 포함한다.

|요소|설명|
| ---------- | ------------------------------------------------------------ |
| 헤더       | 인터페이스를 정의하는 .h 파일의 모음<br />클라이언트는 인터페이스를 통해 컴파일 할 수 있으며 오픈 소스 API의 경우 구현체인 소스 코드(.cpp)가 제공된다 |
| 라이브러리 | API를 구현하는 하나 이상의 동적, 정적 라이브러리             |
| 문서화     | API를 어떻게 사용하는지 설명하는 정보를 담고 있으며 클래스나 함수에 의해 자동으로 메타데이터를 제공한다. |

# API 설계의 차별화되는 특징

인터페이스는 개발자가 작성하는 가장 중요한 코드로 구현 코드에서 발생하는 문제보다 인터페이스에서 발생하는 문제를 고치는 데 더 많은 비용이 들기 때문이다. 따라서 API를 개발하는 것은 GUI나 표준 애플리케이션을 개발하는 것 보다 더 많은 주의를 요구한다.

- API는 여러 사람에 의해 사용되어질 수 있으며 꼭 의도한 방향이 아닌 방향으로 이용될 수도 있다. 엉성하고 사용하기 어려운 GUI가 사용자의 발길을 돌리게 하듯 엉성한 API는 이용자를 경쟁사에게 빼앗기게 만든다.
- API는 여러 애플리케이션이 사용할 수 있으므로 API에서 발생하는 오류는 그 API를 사용하는 모든 애플리케이션에게 영향을 미친다.
- API를 변경할 때는 반드시 하위 호환성을 신경 써야 한다. 만약 이전 버전과 호환되지 않는 코드를 인터페이스에 반영한다면 클라이언트의 코드가 컴파일되지 않거나 혹은 엉성하게 컴파일 되어 이상하게 동작하고 간헐적인 충돌이 발생할 수 있다.
- 새 버전의 API를 릴리즈하기 전에 충분한 리뷰 시간을 가짐으로서 하위 호환성 문제를 조금은 해결할 수 있다. 리뷰 시간에 변경 사항에 대한 합당한 이유를 제시하고 하위 호환성을 유지할 수 있도록 인터페이스를 구현해야 한다.
- 좋은 API는 계획, 설계, 버전 관리 및 리뷰에 많은 비용을 투자하여 사용자를 방해하지 않고 소프트웨어를 변경한거나 개설할 수 있는 근본적인 능력을 확보하여 유연성을 증가시키고 개발 속도가 빨라지게 한다.
- 잘 정리된 문서화가 중요하다. 
- 테스트를 자동하는 것은 중요하다. 테스트를 자동화하여 코드의 정확성을 높인다.



# API를 사용하는 이유

## 견고한 코드

- 구현 은닉
  - 구체적인 코드는 내부적으로 숨겨 사용자에게 불편이나 혼란을 주지 않고서도 구현 코드를 변경하는 유연성을 확보한다.
- 지속성 향상
  - 향후의 유지보수를 고려하여 일관성있는 설계에 많은 노력을 기울리고 구체적인 구현 로직을 겉으로 드러내지 않아 시스템과의 강한 의존 관계 형성을 막아 쉽게 개선(변경) 가능한 코드가 되도록 한다.
- 모듈화
- 중복 코드 제거
- 가정하에 작성된 하드코드 제거
  - 하드 코딩된 값을 제거한다. 예를 들어 로그 파일을 매번 `myprogram.log`에 남긴다고 할 지라도 API를 이용해 `myprogram.log`라는 상수값보다 `GetLogFilename()`와 같은 것을 이용하는 것이 더 깔끔하다.
- 쉬운 코드 변경
- 쉬운 최적화

## 코드의 재사용

## 병렬 개발

여러명의 개발자가 서로의 코드에 의존하고 있을 지라도 함께 개발이 가능하다. 개발자가 사전에 미리 API에 대해 논의하면 실제로 그 기능이 완성되지 않아도 바로 개발을 시작할 수 있다.

