# Rust에서 반복자 패턴

### 반복자란?

반복자 패턴은 어떤 일련의 항목을 순서대로 접근하여 작업을 수행하도록 해준다

```Rust
let v1 = vec![1, 2, 3];
let v1_iter = v1.iter();
```

위와 같이 반복자를 만들 수 있다
반복자를 사용하기 위해 아래와 같은 코드를 작성할 수 있다

```Rust
for val in v1_iter {
    println!("Got: {}", val);
}
```



C언어에서 그랬듯이 새로운 변수를 만들고 인덱스 0부터 시작해 하나씩 늘려가며 각 요소에 접근하는 방법이 있다
그럼에도 불구하고 반복자 패턴을 쓰는 이유는 반복적이고 잘못된 인덱스에 접근하는 등의 잠재적인 문제를 가질 수 있는 코드를 줄일 수 있기 때문이다
또한 위의 예제와 처럼 벡터 외에도 많은 다른 종류의 시퀀스에 대해 동일한 로직을 사용할 수 있게 만들어 코드가 더 유연성을 가지도록 한다



---



### 반복자 구현하기

Rust에서 모든 반복자는 표준 라이브러리에 정의된 `Iterator`라는 트레잇으로 구현된다

Iterator의 메서드로 `next`가 있습니다
이는 Option<T>타입을 리턴하며 반복자가 종료될때 None을 반환합니다



---



### 반복자 어댑터

`Iterator`트레잇에 기본 구현이 된 메서드가 여러개 있습니다 특히 이 메서드들 중 `next`를 호출하는 메서드가 있는데 이를 __`반복자 어댑터`__라고 합니다

```Rust
let v1 = vec![1, 2, 3];
let total = v1.iter().sum();
```

위의 코드에서 sum메서드는 생성된 iterator를 next를 사용하여 반복자를 써버립니다
이런 메서드를 소비하는 어댑터라고 합니다
sum에서 반복자의 소유권을 가져가기 때문에 더 이상 반복자는 사용할 수 없습니다