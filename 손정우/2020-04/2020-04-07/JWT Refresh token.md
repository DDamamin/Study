# JWT Refresh token

JWT로 인증을 할 때 Access token과 Refresh token으로 나뉘는 경우가 있다.

Access token이 만약 수명이 길다면 이것이 탈취 당했을 때 이를 막을 만한 방법이 크게 없다. 따라서 Access token의 수명을 짧게 한 후에 수명이 긴 Refresh token을 같이 나눠주고 Access token이 만료되었을 때 Refresh token을 이용해 재발급 받게 만든다.

여기서 나는 한 가지 궁금한게 생겼다. Refresh token을 이용해 Access tooken을 재발급 받을 수 있다면 Refresh token이 탈취 당하면 안되는 것이 아닌가?

이거 대안으로 sliding session이 있는데 이는 수명을 가진 세션이다. 이를 이용하거나 혹은 같이 이용하면 된다는데 세션을 쓸거면 JWT를 사용하는 의미가 사라진다고 생각한다.

내가 생각한 대책은 리프레쉬는 내용을 안 담지만 서명 쪽에는 내용하고 같이 해쉬만들고 엑세스 재발급때 내용하고 리프레쉬하고 같이 보내게 하면 될거 같다. 그럼 서버에서 받은 내용과 함께 리프레쉬 토큰을 검증하고 엑세스 토큰을 재발급하면 된다. 이럼 최종적으로 만료된 엑세스 토큰이라도 가져야만 리프레쉬 토큰이 쓸모가 있어진다. 하지만 이럼 JWT 스펙에 어긋난다.

아 모르겠다.

