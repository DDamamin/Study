# 코딩도장 32

람다 표현식은 식 형태로 되어 있다고 해서 람다 표현식(lambda expression)이라고 부른다. 람다 표현식은 함수를 간편하게 작성할 수 있어서 다른 함수의 인수로 넣을 때 주로 사용한다.



### 람다 표현식으로 함수 만들기

람다 표현식은 lambda에 매개변수를 지정하고 : (콜론) 뒤에 반화값으로 사용할 식을 지정한다.

```python
>>> lambda x: x + 10
<function <lambda> at 0X02C27270>
```

실행을 해보면 함수 객체가 나오는데, 이 상태로는 함수를 호출할 수 없다. 람다 표현식을 이름이 없는 함수를 만들기 때문이다. 그래서 람다 표현식을 **익명 함수(anonymous function)이라고 부르기도 한다**.

lambda로 만든 익명 함수를 호출하려면 람다 표현식을 변수에 할당해주면 된다.

```
>>> plus_ten = lambda x: x + 10
>>> plus_ten(1)
11
```

lambda x: x + 10은 매개변수 x 하나를 받고, x에 10을 더해서 반환한다는 뜻이다.즉, 매개변수, 연산자, 값 등을 조합한 식으로 반환값을 만드는 방식이다.



### 람다 표현식 자체를 호출하기

람다 표현식은 변수에 할당하지 않고 람다 표혀닉 자체를 바로 호출할 수 있다. 람다 표현식을 () (괄호)로 묶은 뒤에 다시 ( )를 붙이고 인수를 넣어서 호출하면 된다.

- (lambd 매개변수들: 식)(인수들)

```python
>>> (lambda x: x + 10)(1)
11
```





### 람다 표현식 안에서는 변수를 만들 수 없다.

반환갑 부분은 변수 없이 식 한줄로 표현할 수가 있어야 한다. 변수가 필요한 코드일 경우 def 로 함수로 작성하는 것이 좋다.

```python
>>> (lambda x: y = 10; x + y)
```

단, 람다 표현식 바깥에 있는 변수는 사용할 수 있다.

```python
>>> y = 10
>>> (lambda x: x + y)(1)
11
```





### 람다 표현식을 인수로 사용하기

```python
>>> def plus_ten(x):
		return x + 10
...
>>> list(map(plus_ten, [1, 2, 3]))
[11, 12, 13]
```

map을 사용할 때 자료형 int, float, str 등을 넣었는데 함수를 직접 만들어서 넣어도 된다.

람다 표현식으로 함수를 만들어서 map에 넣어보면

```python
>>> list(map(lambda x:x + 10, [1, 2, 3]))
```



#### 람다 표현식으로 매개 변수가 없는 함수 만들기

lambda 뒤에 아무것도 지정하지 않고 : (콜론)을 붙인다. 단 콜론 뒤에는 반드시 반환할 값이 있어야 한다. 왜냐하면 표현식(expression)은 반드시 값으로 평가되어야 하기 때문이다.

```python
>>> (lambda: 1)()
1
>>> x = 10
>>> (lambda: x)()
10
```





### 람다 표현식에 조건부 표현식 사용하기

- lambda 매개변수들 : 식1 if 조건식 else 식2

```python
>>> a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
>>> list(map(lambda x: str(x) if x % 3 == 0 else x, a))
[1, 2, '3', 4, 5, '6', 7, 8, '9', 10]
```

map은 리스트의 요소를 각각 처리하므로 lambda의 반환값도 요소라고 해야 한다. 요소가 3의 배수일 경우 str(x)로 문자열로 만들어서 반환했고, 3의 배수가 아닐 때는 x로 요소를 그대로 반환했다.

람다 표현식 안에서 조건부 표현식 if, else를 사용할 때는 : (콜론)을 붙이지 않는다. 조건부 표현식은 식 if 조건식 else 식2 형식으로 사용하며 식1은 조건식이 참일 때, 식2는 조건식이 거짓일 때 사용할 식이다.

람다 표현식에서 if를 사용했다면 반드시 else를 사용해야 한다. elif는 사요할 수 없다. 식 if 조건식1 else 식2 if 조건식2 else 식3 형식으로 if를 연속으로 사용해야 한다.

- lambda 매개변수들: 식1 if 조건식1 else 식2 if 조건식2 else 식3





### map에 객체를 여러 개 넣기

map은 리스트 등의 반복 가능한 객체를 여러 개 넣을 수 있다.

```python
>>> a = [1, 2, 3, 4, 5]
>>> b = [2, 4, 6, 8, 10]
>>> list(map(lambda x, y: x * y, a, b))
[2, 8, 18, 32, 50]
```

리스트 두 개를 처리할 때는 람다 표현식에서 lambda x, y : x * y 처럼 매개변수를 두 개로 지정하면 된다. map에 람다 표현식을 넣고 그다음에 리스트 두 개를 콤마로 구분해서 넣어준다. 람다 표현식의 매개변수에 개수에 맞게 반복 가능한 객체도 콤마로 구분해서 넣어주면 된다.





### filter 사용하기

filter는 반복 간으한 객체에서 특정 조건에 맞는 요소만 가져오는데, filter에 지정한 함수의 반환값이 True일 때만 해당 요소를 가져온다.

- filter(함수, 반복 가능한 객체)

```python
>>> def f(x):
		return x > 5 and x < 10
...
>>> a = [8, 3, 2, 10, 15, 7, 1, 9, 0, 11]
>>> list(filter(f,a))
[8, 7, 9]
```

filter는 x > 5 and x < 10의 결과가 참인 요소만 가져오고 거짓인 요소는 버린다.

```python
>>> a = [8, 3, 2, 10, 15, 7, 1, 9, 0, 11]
>>> list(filter(lambda x: x > 5 and x < 10, a))
[8, 7, 9]
```





### reduce 사용하기

reduce는 반복 가능한 객체의 각 요소를 지정된 함수로 처리한 뒤 이전 결과와 누적해서 반환하는 함수이다.

- from functools import reduce
- reduce(함수, 반복가능한객체)

```python
>>> def f(x, y):
		return x + y
		
>>> a = [1, 2, 3, 4, 5]
>>> from funtools import reduce
>>> reduce(f, a)
15
```



```python
>>> a = [1, 2, 3, 4, 5]
>>> from functools import reduce
>>> reduce(lambda x, y: x + y, a)
15
```

